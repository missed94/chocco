(function() {
  function carousel(arrowRight, arrowLeft, moove, carouselContent) {

    let countChildrenElement = $(carouselContent).children('.slider-content-item').length;
  
  
    arrowRight.on("click", function () {
      moove -= 100;
  
      if (moove < -((countChildrenElement - 1) * 100)) {
        moove = 0;
      }
  
      return carouselContent.css("left", (moove + "%"));
    });
  
    arrowLeft.on("click", function () {
      moove += 100;
  
      if (moove > 0) {
        moove = -((countChildrenElement - 1) * 100);
        }
      
  
      return carouselContent.css("left", (moove + "%"));
    });
  
    
  }
  
  carousel(
    $(".slider_arrow-right-wrapper"),
    $(".slider__arrow-left-wrapper"),
    0,
    $(".slider-content-list")
  ); 
  
  
  /* const arrowLeft = document.querySelector(".slider__arrow-left-wrapper");
  const arrowRight = document.querySelector(".slider_arrow-right-wrapper");
  const carouselContent = document.querySelector(".slider-content-list");
  const carouselItem = document.querySelectorAll(".slider-content-item")
  
  let moove = 0;
  
  
  
  function carousel(arrowLeft, arrowRight, carouselContent, moove) {
  
  let countChildrenElement = $(carouselContent).children('.slider-content-item').length;
  
  
  arrowRight.addEventListener("click", function (e) {
  
    
  
    moove = moove - 100;
  
    if (moove < -((countChildrenElement - 1) * 100)) {
    moove = 0;
    }
  
  
    return carouselContent.style.left = moove + "%";
  });
  
  arrowLeft.addEventListener("click", function (event) {
  
    moove = moove + 100;
  
    if (moove > 0) {
    moove = -((countChildrenElement - 1) * 100);
    }
  
   
    return carouselContent.style.left = moove + "%";
  });
  
  
  }
  
  carousel(arrowLeft, arrowRight, carouselContent, 0, ) */
})()

;(function() {
  const hamburger = document.querySelector(".hamburger");
  const fullMenu = document.querySelector(".full-menu");
  const closeBtn = document.querySelector("#close-full-menu");
  const FullMenuItem = document.querySelectorAll(".full-menu-item");
  const wrapper = document.querySelector(".wrapper");
  
  hamburger.addEventListener("click", function (event) {
    fullMenu.style.left = "0";
  });
  
  closeBtn.addEventListener("click", function (event) {
    fullMenu.style.left = "100%";
  });
  
  FullMenuItem.forEach(function (element) {
    element.addEventListener("click", function (event) {
      fullMenu.style.left = "100%";
    });
  });
  
  fullMenu.addEventListener("click", function(e){
    if (e.target.className == 'full-menu') {
    fullMenu.style.left = "100%";
    }
  })
  
  window.addEventListener("resize", function (event) {
    if (event.currentTarget.innerWidth > 767) {
      fullMenu.style.left = "100%";
    }
  });
  
})()



;(function() {
  let myMap;

  const init = () => {
    myMap = new ymaps.Map("map", {
      // Координаты центра карты.
      // Порядок по умолчанию: «широта, долгота».
      // Чтобы не определять координаты центра карты вручную,
      // воспользуйтесь инструментом Определение координат.
      center: [55.03, 82.92],
      // Уровень масштабирования. Допустимые значения:
      // от 0 (весь мир) до 19.
      zoom: 16,
      controls:[]
  });
  
  const coords = [
    [55.030439, 82.924504],
    [55.028631, 82.918379],
    [55.031376, 82.917726]
  ];
  
  
  var myCollection = new ymaps.GeoObjectCollection({},{
  
    draggable: false,
    iconLayout: 'default#image',
    iconImageHref: './icons/icon_map.svg',
      iconImageSize: [46, 57],
      iconImageOffset: [-35, -52]
  });
  
  coords.forEach(coord => {
    myCollection.add(new ymaps.Placemark(coord))
  });
  
  myMap.geoObjects.add(myCollection);
  
  myMap.behaviors.disable('scrollZoom');
  
  }
  
  ymaps.ready(init);
})()



;(function() {
  const validateFields = (form, fieldsArray) => {
    fieldsArray.forEach((field) => {
      field.removeClass("input-error");
  
      if (field.val().trim() == "") {
        field.addClass("input-error");
      }
    });
  
    const errorFields = form.find(".input-error");
    return errorFields.length == 0;
  };
  
  $(".form").submit((e) => {
    e.preventDefault();
  
    const form = $(e.currentTarget);
    const name = form.find("[name='name']");
    const phone = form.find("[name='phone']");
    const comment = form.find("[name='comment']");
    const to = form.find("[name='to']");
  
    const modal = $("#modal");
    const content = modal.find(".modal__content");
  
    modal.removeClass("modal-error");
  
    const isValid = validateFields(form, [name, phone, comment, to]);
  
    if (isValid) {
      const request = $.ajax({
        url: "https://webdev-api.loftschool.com/sendmail",
        method: "post",
        data: {
          name: name.val(),
          phone: phone.val(),
          comment: comment.val(),
          to: to.val(),
        },
      });
  
      request.done((data) => {
        content.text(data.message);
      });
  
      request.fail((data) => {
        const message = data.responseJSON.message;
        content.text(message);
        modal.addClass("modal-error");
      });
  
      request.always(() => {
        $.fancybox.open({
          src: "#modal",
          type: "inline",
        });
      });
    }
  });
  
  $(".app-close-modal").click((e) => {
    e.preventDefault();
  
    $.fancybox.close();
  });
})()



;(function () {
  const sections = $("section");
  const display = $(".main__content");
  const sideMenu = $(".fixed-menu");
  const sideMenuItems = sideMenu.find(".fixed-menu__item");

  const mobileDetect = new MobileDetect(window.navigator.userAgent);
  const isMobile = mobileDetect.mobile();

  let inScroll = false;

  sections.first().addClass("active");

  const countSectionPosition = (sectionEq) => {
    const position = sectionEq * -100;

    if (isNaN(position)) {
      console.error("передано неверное значение в countSectionPosition");
      return 0;
    }

    return position;
  };

  const resetActiveClassForItem = (items, itemEq, activeClass) => {
    items.eq(itemEq).addClass(activeClass).siblings().removeClass(activeClass);
  };

  //функция запускающая анимацию
  const performTransition = (sectionEq) => {
    if (inScroll) return;

    inScroll = true;
    const position = countSectionPosition(sectionEq);

    display.css({
      transform: `translateY(${position}%)`,
    });

    resetActiveClassForItem(sections, sectionEq, "active");

    setTimeout(() => {
      inScroll = false;
      resetActiveClassForItem(
        sideMenuItems,
        sectionEq,
        "fixed-menu__item_active"
      );
    }, 1500);
  };

  // функция определяюзаяя к какой секции скролить
  const viewportScroller = () => {
    const activeSection = sections.filter(".active");
    const nextSection = activeSection.next();
    const prevSection = activeSection.prev();

    return {
      next() {
        if (nextSection.length) {
          performTransition(nextSection.index());
        }
      },

      prev() {
        if (prevSection.length) {
          performTransition(prevSection.index());
        }
      },
    };
  };

  $(window).on("wheel", (e) => {
    const deltaY = e.originalEvent.deltaY;
    const scroller = viewportScroller();
    if (deltaY > 0) {
      scroller.next();
    }

    if (deltaY < 0) {
      scroller.prev();
    }
  });

  $(window).on("keydown", (e) => {
    const tagName = e.target.tagName.toLowerCase();
    const userTypingInInputs = tagName == "input" || tagName == "textarea";
    const scroller = viewportScroller();

    if (userTypingInInputs) return;

    switch (e.keyCode) {
      case 40: //prev
        scroller.next();
        break;

      case 38: //next
        scroller.prev();
        break;
    }
  });

  $(".wrapper").on("touchmove", (e) => {
    e.preventDefault();
  });

  $("[data-scroll-to]").click((e) => {
    e.preventDefault();

    const $this = $(e.currentTarget);
    const target = $this.attr("data-scroll-to");
    const reqSection = $(`[data-section-id = ${target}]`);

    performTransition(reqSection.index());
  });

  /* if (isMobile) {
    $("body").swipe( {
      //Generic swipe handler for all directions
      swipe:function(event,direction) {
        
       const scroller = viewportScroller(); 
       let scrollDirection = "";
       
    
       if (direction == "up") scrollDirection = "next";
       if (direction == "down") scrollDirection = "prev";
    
       scroller[scrollDirection]();
    }
    })
  
  }
   */
  if (isMobile) {
    $("body").swipe({
      swipe: function (event, direction) {
        const scroller = viewportScroller();
        let scrollDirection = "";
        if (direction == "up") {
          scrollDirection = "next";
        }

        if (direction == "down") {
          scrollDirection = "prev";
        }

        scroller[scrollDirection]();
      },
    });
  }
})();

;(function() {
//объявляем переменные:

//переменная с круглыми аватарками


const avatars = $('.interactive-avatar');

const displayInner = $('.rewievs__display-inner');


/* const avatars = $('[data-from]');

const displayInner = $('[data-to]');



avatars.on('click', e => {
    e.preventDefault();
    const $this = $(e.currentTarget);

    const displayInnerData = displayInner

    avatars.removeClass('interactive-avatar_active');


    if ($this.hasClass('interactive-avatar')) {
        $this.addClass('interactive-avatar_active')
    }



})  */





//объявляем цикл который перебирает все круглые аватарки
for (let i = 0; i < avatars.length; i++) {
    //присваиваем элементу цикла(конкретной аватрке) переменную элемент
    let element = avatars[i];

    //создаем событие клика на аватарку и функцию которая выполняется при клике
    element.addEventListener("click", function (e) {

        //Внтури функции:

        //отменяем стандартное действие браузера при клике на элемент(ссылка)
        e.preventDefault()

        //снова объявляем цикл который перебирает все круглые аватарки
        for (let index = 0; index < avatars.length; index++) {

            //убираем активный класс всем аватаркам при клике, на тех на которых он есть
            avatars[index].classList.remove('interactive-avatar_active')
            //убираем активный класс дисплею при клике, на тех на которых он есть
            displayInner[index].classList.remove('rewievs__display-inner_active')

        }
        //присваиваем активный класс аватарке, на которурую произвели клик
        displayInner[i].classList.add('rewievs__display-inner_active');
        //присваиваем активный класс дисплею
        e.currentTarget.classList.add('interactive-avatar_active');
    })
}




/* function change(target, 
                i, 
                avatars,
                displayInner, 
                avatarsActive, 
                displayInnerActive, 
                e) {

    e.preventDefault();

    for (let index = 0; 
         index < avatars.length; 
         index++) {

        avatars[index].classList.remove(avatarsActive)
        displayInner[index].classList.remove(displayInnerActive)
    }

    displayInner[i].classList.add(displayInnerActive);
    target.classList.add(avatarsActive);
};



for (let i = 0; 
     i < avatars.length; 
     i++) {

    let element = avatars[i];

    element.addEventListener("click", function (e) {
        
    change( e.currentTarget, 
            i, 
            avatars, 
            displayInner, 
            'interactive-avatar_active', 
            'rewievs__display-inner_active',
            e)
    })
} */
})()


;(function() {
const openItem = function (item) {
  const container = item.closest(".teammate-item");
  const contentBlock = container.find(".position-wrapper");
  const textBLock = contentBlock.find(".position");
  const reqHeight = textBLock.height();
  const arrow = container.find(".team__desc-arrow-img");

  container.addClass("teammate-item_active");
  arrow.addClass("team__desc-arrow-img_active");

  contentBlock.height(reqHeight);
};




const closeEveryItem = function (container) {
  const items = container.find(".position-wrapper");
  const itemContainer = container.find(".teammate-item");
  const itemArrow = container.find(".team__desc-arrow-img");
  items.height(0);

  itemArrow.removeClass("team__desc-arrow-img_active");
  itemContainer.removeClass("teammate-item_active");
};




$(".teammate-name-wrapper").on("click", function (e) {
  const $this = $(e.currentTarget);
  const container = $this.closest(".team");
  const elemContainer = $this.closest(".teammate-item");

  if (elemContainer.hasClass("teammate-item_active")) {
    closeEveryItem(container);
  } else {
    closeEveryItem(container);
    openItem($this);
  }
});

/* const items = $('.teammate-name-wrapper');
const positionWrapper = $('.position-wrapper');
const arrow = $('.team__desc-arrow-img');

items.each((i,item) => {

$(item).on('click', function (e) {

  items.each((j,elem) =>  {

    if (j != i) {
      $(positionWrapper[j]).removeClass('position-wrapper_active');
      $(arrow[j]).removeClass('team__desc-arrow-img_active');
       }

  })
  
    $(positionWrapper[i]).toggleClass('position-wrapper_active');
    $(arrow[i]).toggleClass('team__desc-arrow-img_active');
    
  })

}) */

/* const items = document.querySelectorAll('.teammate-name-wrapper');
const positionWrapper = document.querySelectorAll('.position-wrapper');
const arrow = document.querySelectorAll('.team__desc-arrow-img');


for (let i = 0; i < items.length; i++) {

  let element = items[i];

  element.addEventListener("click", function (e) { 

    for (let j = 0; j < items.length; j++) {


    if (j != i) {
    positionWrapper[j].classList.remove('position-wrapper_active');
    arrow[j].classList.remove('team__desc-arrow-img_active');
     }


    }

    positionWrapper[i].classList.toggle('position-wrapper_active');
    arrow[i].classList.toggle('team__desc-arrow-img_active');
    
    

  })

} */

})()



/* const openAcco = (item) => {

item.addClass("acco-item_active");

}



const closeAcco = (list) => {

  const listItem = list.find(".acco-item"); 
  listItem.removeClass("acco-item_active");

  }


$(".acco-title-wrapper").on('click', (e) => {
    e.preventDefault();
    const $this = $(e.currentTarget);
    const itemContainer = $this.closest(".acco-item");
    const accoList = itemContainer.closest(".acco-list");
    
if (itemContainer.hasClass("acco-item_active")) {
    closeAcco(accoList);



} else {
    closeAcco(accoList);
    openAcco(itemContainer);

    }
}) */





;(function() {


  const maxWidth = document.body.clientWidth;

  
  const openAcco = (item) => {
    item.addClass("acco-item_active");
    
  };
  
  const closeAcco = (list) => {
    const listItem = list.find(".acco-item");
    listItem.removeClass("acco-item_active");
  };
  

  let currWidth = document.body.clientWidth;

  $(window).on('resize', function(e) {
    currWidth = document.body.clientWidth;
  })
  
  
  
  $(".acco-item").on("click", (e) => {
    e.preventDefault();
    
    if (currWidth > 480) {
      
      if ($(e.target).hasClass("acco-title-wrapper") || $(e.target).hasClass("acco-title")) {
        const $this = $(e.target);
        const itemContainer = $this.closest(".acco-item");
        const accoList = itemContainer.closest(".acco-list");
    
    
        if (itemContainer.hasClass("acco-item_active")) {
          closeAcco(accoList);
        } else {
          closeAcco(accoList);
          openAcco(itemContainer);
        }
      }
    
      if ($(e.target).hasClass("close-x") || $(e.target).hasClass("close-vert-menu")) {
        const target = $(e.target);
        const Items = target.closest(".acco-list");
    
        closeAcco(Items)
      } 
    } else {
        let itemToAdd = $(`<div class="added-item"></div>`);
        itemToAdd.html($(e.currentTarget).html());

        if (!$('.added-item').length) {
          $('.vertical-menu__section').append(itemToAdd);

          setTimeout(() => {
          itemToAdd.addClass("added-item_active")
          }, 100);

          /* itemToAdd.addClass("added-item_active") */
          $('.added-item').on('click', function (e) {
            const $target = $(e.target)
            if ($target.hasClass('close-x') || $target.hasClass('acco-title-wrapper') || $target.hasClass('acco-title')) {

              itemToAdd.removeClass("added-item_active")
              setTimeout(() => {
                itemToAdd.remove()
                }, 500);
            }

            
            
          })
        }
      }
     
  });
  
})()


;(function() {
  const player = $(".player-elem")[0];
  const playerContainer = $(".player");
  
  $(".play-stop").click((e) => {
    e.preventDefault();
  
    if (playerContainer.hasClass("player_paused")) {
      playerContainer.removeClass("player_paused");
      playerContainer.removeClass("player_active");
      player.pause();
    } else {
      playerContainer.addClass("player_paused");
      player.play();
    }
  });
  
  $(".playback__slider-line").click((e) => {
    const line = $(e.currentTarget);
    const clickedPos = e.originalEvent.layerX;
    const newBtnPosPrecent = (clickedPos / line.width()) * 100;
  
    $(".playback__btn").css({
      left: `${newBtnPosPrecent}%`,
    });
  
    player.pause();
    player.currentTime = player.duration * (clickedPos / line.width());
    player.play();
    playerContainer.addClass("player_paused");
  });
  
  $(player).on("timeupdate", function () {
    let playBackBtn = $(".playback__btn");
    let timeProgress = (player.currentTime / player.duration) * 100 + "%";
    playBackBtn.css("left", timeProgress);
  });
  
  $(".volume__slider-line").click((e) => {
    const volumeLine = $(e.currentTarget);
    const volumeClickedPos = e.originalEvent.layerX;
  
    const volBtnPosPrecent = (volumeClickedPos / volumeLine.width()) * 100;
  
    $(".volume__slider-btn").css({
      left: `${volBtnPosPrecent}%`,
    });
    player.volume = volBtnPosPrecent / 100;
  
    if (playerContainer.hasClass("player__sound-off")) {
      playerContainer.removeClass("player__sound-off");
      player.muted = false;
    }
  });
  
  $(".player-elem").on("play", (e) => {
    playerContainer.addClass("player_active ");
  });
  
  $(".player-splash").on("click", (e) => {
    playerContainer.addClass("player_active player_paused");
    player.play();
  });
  
  $(".volume__icons-wrapper").on("click", (e) => {
    if (playerContainer.hasClass("player__sound-off")) {
      playerContainer.removeClass("player__sound-off");
      player.muted = false;
    } else if ($(e.target).filter("close")) {
      playerContainer.addClass("player__sound-off");
      player.muted = true;
    }
  
  });
  
})()




//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcm91c2VsLmpzIiwiaGFtYnVyZ2VyLW1lbnUuanMiLCJtYXAuanMiLCJtb2RhbC5qcyIsIm9uZVBhZ2VTY3JvbGwuanMiLCJzbGlkZS1zaG93LmpzIiwidGVhbS1hY2NvcmRpb24uanMiLCJ2ZXJ0aWNhbC1hY2NvLmpzIiwidmlkZW8uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDeEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN4SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcclxuICBmdW5jdGlvbiBjYXJvdXNlbChhcnJvd1JpZ2h0LCBhcnJvd0xlZnQsIG1vb3ZlLCBjYXJvdXNlbENvbnRlbnQpIHtcclxuXHJcbiAgICBsZXQgY291bnRDaGlsZHJlbkVsZW1lbnQgPSAkKGNhcm91c2VsQ29udGVudCkuY2hpbGRyZW4oJy5zbGlkZXItY29udGVudC1pdGVtJykubGVuZ3RoO1xyXG4gIFxyXG4gIFxyXG4gICAgYXJyb3dSaWdodC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgbW9vdmUgLT0gMTAwO1xyXG4gIFxyXG4gICAgICBpZiAobW9vdmUgPCAtKChjb3VudENoaWxkcmVuRWxlbWVudCAtIDEpICogMTAwKSkge1xyXG4gICAgICAgIG1vb3ZlID0gMDtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgICByZXR1cm4gY2Fyb3VzZWxDb250ZW50LmNzcyhcImxlZnRcIiwgKG1vb3ZlICsgXCIlXCIpKTtcclxuICAgIH0pO1xyXG4gIFxyXG4gICAgYXJyb3dMZWZ0Lm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICBtb292ZSArPSAxMDA7XHJcbiAgXHJcbiAgICAgIGlmIChtb292ZSA+IDApIHtcclxuICAgICAgICBtb292ZSA9IC0oKGNvdW50Q2hpbGRyZW5FbGVtZW50IC0gMSkgKiAxMDApO1xyXG4gICAgICAgIH1cclxuICAgICAgXHJcbiAgXHJcbiAgICAgIHJldHVybiBjYXJvdXNlbENvbnRlbnQuY3NzKFwibGVmdFwiLCAobW9vdmUgKyBcIiVcIikpO1xyXG4gICAgfSk7XHJcbiAgXHJcbiAgICBcclxuICB9XHJcbiAgXHJcbiAgY2Fyb3VzZWwoXHJcbiAgICAkKFwiLnNsaWRlcl9hcnJvdy1yaWdodC13cmFwcGVyXCIpLFxyXG4gICAgJChcIi5zbGlkZXJfX2Fycm93LWxlZnQtd3JhcHBlclwiKSxcclxuICAgIDAsXHJcbiAgICAkKFwiLnNsaWRlci1jb250ZW50LWxpc3RcIilcclxuICApOyBcclxuICBcclxuICBcclxuICAvKiBjb25zdCBhcnJvd0xlZnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNsaWRlcl9fYXJyb3ctbGVmdC13cmFwcGVyXCIpO1xyXG4gIGNvbnN0IGFycm93UmlnaHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNsaWRlcl9hcnJvdy1yaWdodC13cmFwcGVyXCIpO1xyXG4gIGNvbnN0IGNhcm91c2VsQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2xpZGVyLWNvbnRlbnQtbGlzdFwiKTtcclxuICBjb25zdCBjYXJvdXNlbEl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlci1jb250ZW50LWl0ZW1cIilcclxuICBcclxuICBsZXQgbW9vdmUgPSAwO1xyXG4gIFxyXG4gIFxyXG4gIFxyXG4gIGZ1bmN0aW9uIGNhcm91c2VsKGFycm93TGVmdCwgYXJyb3dSaWdodCwgY2Fyb3VzZWxDb250ZW50LCBtb292ZSkge1xyXG4gIFxyXG4gIGxldCBjb3VudENoaWxkcmVuRWxlbWVudCA9ICQoY2Fyb3VzZWxDb250ZW50KS5jaGlsZHJlbignLnNsaWRlci1jb250ZW50LWl0ZW0nKS5sZW5ndGg7XHJcbiAgXHJcbiAgXHJcbiAgYXJyb3dSaWdodC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICBcclxuICAgIFxyXG4gIFxyXG4gICAgbW9vdmUgPSBtb292ZSAtIDEwMDtcclxuICBcclxuICAgIGlmIChtb292ZSA8IC0oKGNvdW50Q2hpbGRyZW5FbGVtZW50IC0gMSkgKiAxMDApKSB7XHJcbiAgICBtb292ZSA9IDA7XHJcbiAgICB9XHJcbiAgXHJcbiAgXHJcbiAgICByZXR1cm4gY2Fyb3VzZWxDb250ZW50LnN0eWxlLmxlZnQgPSBtb292ZSArIFwiJVwiO1xyXG4gIH0pO1xyXG4gIFxyXG4gIGFycm93TGVmdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgXHJcbiAgICBtb292ZSA9IG1vb3ZlICsgMTAwO1xyXG4gIFxyXG4gICAgaWYgKG1vb3ZlID4gMCkge1xyXG4gICAgbW9vdmUgPSAtKChjb3VudENoaWxkcmVuRWxlbWVudCAtIDEpICogMTAwKTtcclxuICAgIH1cclxuICBcclxuICAgXHJcbiAgICByZXR1cm4gY2Fyb3VzZWxDb250ZW50LnN0eWxlLmxlZnQgPSBtb292ZSArIFwiJVwiO1xyXG4gIH0pO1xyXG4gIFxyXG4gIFxyXG4gIH1cclxuICBcclxuICBjYXJvdXNlbChhcnJvd0xlZnQsIGFycm93UmlnaHQsIGNhcm91c2VsQ29udGVudCwgMCwgKSAqL1xyXG59KSgpXHJcbiIsIjsoZnVuY3Rpb24oKSB7XHJcbiAgY29uc3QgaGFtYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oYW1idXJnZXJcIik7XHJcbiAgY29uc3QgZnVsbE1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZ1bGwtbWVudVwiKTtcclxuICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2xvc2UtZnVsbC1tZW51XCIpO1xyXG4gIGNvbnN0IEZ1bGxNZW51SXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZnVsbC1tZW51LWl0ZW1cIik7XHJcbiAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3JhcHBlclwiKTtcclxuICBcclxuICBoYW1idXJnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgZnVsbE1lbnUuc3R5bGUubGVmdCA9IFwiMFwiO1xyXG4gIH0pO1xyXG4gIFxyXG4gIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGZ1bGxNZW51LnN0eWxlLmxlZnQgPSBcIjEwMCVcIjtcclxuICB9KTtcclxuICBcclxuICBGdWxsTWVudUl0ZW0uZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgIGZ1bGxNZW51LnN0eWxlLmxlZnQgPSBcIjEwMCVcIjtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG4gIFxyXG4gIGZ1bGxNZW51LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKXtcclxuICAgIGlmIChlLnRhcmdldC5jbGFzc05hbWUgPT0gJ2Z1bGwtbWVudScpIHtcclxuICAgIGZ1bGxNZW51LnN0eWxlLmxlZnQgPSBcIjEwMCVcIjtcclxuICAgIH1cclxuICB9KVxyXG4gIFxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuaW5uZXJXaWR0aCA+IDc2Nykge1xyXG4gICAgICBmdWxsTWVudS5zdHlsZS5sZWZ0ID0gXCIxMDAlXCI7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgXHJcbn0pKClcclxuXHJcblxyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG4gIGxldCBteU1hcDtcclxuXHJcbiAgY29uc3QgaW5pdCA9ICgpID0+IHtcclxuICAgIG15TWFwID0gbmV3IHltYXBzLk1hcChcIm1hcFwiLCB7XHJcbiAgICAgIC8vINCa0L7QvtGA0LTQuNC90LDRgtGLINGG0LXQvdGC0YDQsCDQutCw0YDRgtGLLlxyXG4gICAgICAvLyDQn9C+0YDRj9C00L7QuiDQv9C+INGD0LzQvtC70YfQsNC90LjRjjogwqvRiNC40YDQvtGC0LAsINC00L7Qu9Cz0L7RgtCwwrsuXHJcbiAgICAgIC8vINCn0YLQvtCx0Ysg0L3QtSDQvtC/0YDQtdC00LXQu9GP0YLRjCDQutC+0L7RgNC00LjQvdCw0YLRiyDRhtC10L3RgtGA0LAg0LrQsNGA0YLRiyDQstGA0YPRh9C90YPRjixcclxuICAgICAgLy8g0LLQvtGB0L/QvtC70YzQt9GD0LnRgtC10YHRjCDQuNC90YHRgtGA0YPQvNC10L3RgtC+0Lwg0J7Qv9GA0LXQtNC10LvQtdC90LjQtSDQutC+0L7RgNC00LjQvdCw0YIuXHJcbiAgICAgIGNlbnRlcjogWzU1LjAzLCA4Mi45Ml0sXHJcbiAgICAgIC8vINCj0YDQvtCy0LXQvdGMINC80LDRgdGI0YLQsNCx0LjRgNC+0LLQsNC90LjRjy4g0JTQvtC/0YPRgdGC0LjQvNGL0LUg0LfQvdCw0YfQtdC90LjRjzpcclxuICAgICAgLy8g0L7RgiAwICjQstC10YHRjCDQvNC40YApINC00L4gMTkuXHJcbiAgICAgIHpvb206IDE2LFxyXG4gICAgICBjb250cm9sczpbXVxyXG4gIH0pO1xyXG4gIFxyXG4gIGNvbnN0IGNvb3JkcyA9IFtcclxuICAgIFs1NS4wMzA0MzksIDgyLjkyNDUwNF0sXHJcbiAgICBbNTUuMDI4NjMxLCA4Mi45MTgzNzldLFxyXG4gICAgWzU1LjAzMTM3NiwgODIuOTE3NzI2XVxyXG4gIF07XHJcbiAgXHJcbiAgXHJcbiAgdmFyIG15Q29sbGVjdGlvbiA9IG5ldyB5bWFwcy5HZW9PYmplY3RDb2xsZWN0aW9uKHt9LHtcclxuICBcclxuICAgIGRyYWdnYWJsZTogZmFsc2UsXHJcbiAgICBpY29uTGF5b3V0OiAnZGVmYXVsdCNpbWFnZScsXHJcbiAgICBpY29uSW1hZ2VIcmVmOiAnLi9pY29ucy9pY29uX21hcC5zdmcnLFxyXG4gICAgICBpY29uSW1hZ2VTaXplOiBbNDYsIDU3XSxcclxuICAgICAgaWNvbkltYWdlT2Zmc2V0OiBbLTM1LCAtNTJdXHJcbiAgfSk7XHJcbiAgXHJcbiAgY29vcmRzLmZvckVhY2goY29vcmQgPT4ge1xyXG4gICAgbXlDb2xsZWN0aW9uLmFkZChuZXcgeW1hcHMuUGxhY2VtYXJrKGNvb3JkKSlcclxuICB9KTtcclxuICBcclxuICBteU1hcC5nZW9PYmplY3RzLmFkZChteUNvbGxlY3Rpb24pO1xyXG4gIFxyXG4gIG15TWFwLmJlaGF2aW9ycy5kaXNhYmxlKCdzY3JvbGxab29tJyk7XHJcbiAgXHJcbiAgfVxyXG4gIFxyXG4gIHltYXBzLnJlYWR5KGluaXQpO1xyXG59KSgpXHJcblxyXG5cclxuIiwiOyhmdW5jdGlvbigpIHtcclxuICBjb25zdCB2YWxpZGF0ZUZpZWxkcyA9IChmb3JtLCBmaWVsZHNBcnJheSkgPT4ge1xyXG4gICAgZmllbGRzQXJyYXkuZm9yRWFjaCgoZmllbGQpID0+IHtcclxuICAgICAgZmllbGQucmVtb3ZlQ2xhc3MoXCJpbnB1dC1lcnJvclwiKTtcclxuICBcclxuICAgICAgaWYgKGZpZWxkLnZhbCgpLnRyaW0oKSA9PSBcIlwiKSB7XHJcbiAgICAgICAgZmllbGQuYWRkQ2xhc3MoXCJpbnB1dC1lcnJvclwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgXHJcbiAgICBjb25zdCBlcnJvckZpZWxkcyA9IGZvcm0uZmluZChcIi5pbnB1dC1lcnJvclwiKTtcclxuICAgIHJldHVybiBlcnJvckZpZWxkcy5sZW5ndGggPT0gMDtcclxuICB9O1xyXG4gIFxyXG4gICQoXCIuZm9ybVwiKS5zdWJtaXQoKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICBcclxuICAgIGNvbnN0IGZvcm0gPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICBjb25zdCBuYW1lID0gZm9ybS5maW5kKFwiW25hbWU9J25hbWUnXVwiKTtcclxuICAgIGNvbnN0IHBob25lID0gZm9ybS5maW5kKFwiW25hbWU9J3Bob25lJ11cIik7XHJcbiAgICBjb25zdCBjb21tZW50ID0gZm9ybS5maW5kKFwiW25hbWU9J2NvbW1lbnQnXVwiKTtcclxuICAgIGNvbnN0IHRvID0gZm9ybS5maW5kKFwiW25hbWU9J3RvJ11cIik7XHJcbiAgXHJcbiAgICBjb25zdCBtb2RhbCA9ICQoXCIjbW9kYWxcIik7XHJcbiAgICBjb25zdCBjb250ZW50ID0gbW9kYWwuZmluZChcIi5tb2RhbF9fY29udGVudFwiKTtcclxuICBcclxuICAgIG1vZGFsLnJlbW92ZUNsYXNzKFwibW9kYWwtZXJyb3JcIik7XHJcbiAgXHJcbiAgICBjb25zdCBpc1ZhbGlkID0gdmFsaWRhdGVGaWVsZHMoZm9ybSwgW25hbWUsIHBob25lLCBjb21tZW50LCB0b10pO1xyXG4gIFxyXG4gICAgaWYgKGlzVmFsaWQpIHtcclxuICAgICAgY29uc3QgcmVxdWVzdCA9ICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiBcImh0dHBzOi8vd2ViZGV2LWFwaS5sb2Z0c2Nob29sLmNvbS9zZW5kbWFpbFwiLFxyXG4gICAgICAgIG1ldGhvZDogXCJwb3N0XCIsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgbmFtZTogbmFtZS52YWwoKSxcclxuICAgICAgICAgIHBob25lOiBwaG9uZS52YWwoKSxcclxuICAgICAgICAgIGNvbW1lbnQ6IGNvbW1lbnQudmFsKCksXHJcbiAgICAgICAgICB0bzogdG8udmFsKCksXHJcbiAgICAgICAgfSxcclxuICAgICAgfSk7XHJcbiAgXHJcbiAgICAgIHJlcXVlc3QuZG9uZSgoZGF0YSkgPT4ge1xyXG4gICAgICAgIGNvbnRlbnQudGV4dChkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICB9KTtcclxuICBcclxuICAgICAgcmVxdWVzdC5mYWlsKChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGRhdGEucmVzcG9uc2VKU09OLm1lc3NhZ2U7XHJcbiAgICAgICAgY29udGVudC50ZXh0KG1lc3NhZ2UpO1xyXG4gICAgICAgIG1vZGFsLmFkZENsYXNzKFwibW9kYWwtZXJyb3JcIik7XHJcbiAgICAgIH0pO1xyXG4gIFxyXG4gICAgICByZXF1ZXN0LmFsd2F5cygoKSA9PiB7XHJcbiAgICAgICAgJC5mYW5jeWJveC5vcGVuKHtcclxuICAgICAgICAgIHNyYzogXCIjbW9kYWxcIixcclxuICAgICAgICAgIHR5cGU6IFwiaW5saW5lXCIsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIFxyXG4gICQoXCIuYXBwLWNsb3NlLW1vZGFsXCIpLmNsaWNrKChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgXHJcbiAgICAkLmZhbmN5Ym94LmNsb3NlKCk7XHJcbiAgfSk7XHJcbn0pKClcclxuXHJcblxyXG4iLCI7KGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCBzZWN0aW9ucyA9ICQoXCJzZWN0aW9uXCIpO1xyXG4gIGNvbnN0IGRpc3BsYXkgPSAkKFwiLm1haW5fX2NvbnRlbnRcIik7XHJcbiAgY29uc3Qgc2lkZU1lbnUgPSAkKFwiLmZpeGVkLW1lbnVcIik7XHJcbiAgY29uc3Qgc2lkZU1lbnVJdGVtcyA9IHNpZGVNZW51LmZpbmQoXCIuZml4ZWQtbWVudV9faXRlbVwiKTtcclxuXHJcbiAgY29uc3QgbW9iaWxlRGV0ZWN0ID0gbmV3IE1vYmlsZURldGVjdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbiAgY29uc3QgaXNNb2JpbGUgPSBtb2JpbGVEZXRlY3QubW9iaWxlKCk7XHJcblxyXG4gIGxldCBpblNjcm9sbCA9IGZhbHNlO1xyXG5cclxuICBzZWN0aW9ucy5maXJzdCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG5cclxuICBjb25zdCBjb3VudFNlY3Rpb25Qb3NpdGlvbiA9IChzZWN0aW9uRXEpID0+IHtcclxuICAgIGNvbnN0IHBvc2l0aW9uID0gc2VjdGlvbkVxICogLTEwMDtcclxuXHJcbiAgICBpZiAoaXNOYU4ocG9zaXRpb24pKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCLQv9C10YDQtdC00LDQvdC+INC90LXQstC10YDQvdC+0LUg0LfQvdCw0YfQtdC90LjQtSDQsiBjb3VudFNlY3Rpb25Qb3NpdGlvblwiKTtcclxuICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHBvc2l0aW9uO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHJlc2V0QWN0aXZlQ2xhc3NGb3JJdGVtID0gKGl0ZW1zLCBpdGVtRXEsIGFjdGl2ZUNsYXNzKSA9PiB7XHJcbiAgICBpdGVtcy5lcShpdGVtRXEpLmFkZENsYXNzKGFjdGl2ZUNsYXNzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKGFjdGl2ZUNsYXNzKTtcclxuICB9O1xyXG5cclxuICAvL9GE0YPQvdC60YbQuNGPINC30LDQv9GD0YHQutCw0Y7RidCw0Y8g0LDQvdC40LzQsNGG0LjRjlxyXG4gIGNvbnN0IHBlcmZvcm1UcmFuc2l0aW9uID0gKHNlY3Rpb25FcSkgPT4ge1xyXG4gICAgaWYgKGluU2Nyb2xsKSByZXR1cm47XHJcblxyXG4gICAgaW5TY3JvbGwgPSB0cnVlO1xyXG4gICAgY29uc3QgcG9zaXRpb24gPSBjb3VudFNlY3Rpb25Qb3NpdGlvbihzZWN0aW9uRXEpO1xyXG5cclxuICAgIGRpc3BsYXkuY3NzKHtcclxuICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWSgke3Bvc2l0aW9ufSUpYCxcclxuICAgIH0pO1xyXG5cclxuICAgIHJlc2V0QWN0aXZlQ2xhc3NGb3JJdGVtKHNlY3Rpb25zLCBzZWN0aW9uRXEsIFwiYWN0aXZlXCIpO1xyXG5cclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBpblNjcm9sbCA9IGZhbHNlO1xyXG4gICAgICByZXNldEFjdGl2ZUNsYXNzRm9ySXRlbShcclxuICAgICAgICBzaWRlTWVudUl0ZW1zLFxyXG4gICAgICAgIHNlY3Rpb25FcSxcclxuICAgICAgICBcImZpeGVkLW1lbnVfX2l0ZW1fYWN0aXZlXCJcclxuICAgICAgKTtcclxuICAgIH0sIDE1MDApO1xyXG4gIH07XHJcblxyXG4gIC8vINGE0YPQvdC60YbQuNGPINC+0L/RgNC10LTQtdC70Y/RjtC30LDRj9GPINC6INC60LDQutC+0Lkg0YHQtdC60YbQuNC4INGB0LrRgNC+0LvQuNGC0YxcclxuICBjb25zdCB2aWV3cG9ydFNjcm9sbGVyID0gKCkgPT4ge1xyXG4gICAgY29uc3QgYWN0aXZlU2VjdGlvbiA9IHNlY3Rpb25zLmZpbHRlcihcIi5hY3RpdmVcIik7XHJcbiAgICBjb25zdCBuZXh0U2VjdGlvbiA9IGFjdGl2ZVNlY3Rpb24ubmV4dCgpO1xyXG4gICAgY29uc3QgcHJldlNlY3Rpb24gPSBhY3RpdmVTZWN0aW9uLnByZXYoKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuZXh0KCkge1xyXG4gICAgICAgIGlmIChuZXh0U2VjdGlvbi5sZW5ndGgpIHtcclxuICAgICAgICAgIHBlcmZvcm1UcmFuc2l0aW9uKG5leHRTZWN0aW9uLmluZGV4KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcbiAgICAgIHByZXYoKSB7XHJcbiAgICAgICAgaWYgKHByZXZTZWN0aW9uLmxlbmd0aCkge1xyXG4gICAgICAgICAgcGVyZm9ybVRyYW5zaXRpb24ocHJldlNlY3Rpb24uaW5kZXgoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuICB9O1xyXG5cclxuICAkKHdpbmRvdykub24oXCJ3aGVlbFwiLCAoZSkgPT4ge1xyXG4gICAgY29uc3QgZGVsdGFZID0gZS5vcmlnaW5hbEV2ZW50LmRlbHRhWTtcclxuICAgIGNvbnN0IHNjcm9sbGVyID0gdmlld3BvcnRTY3JvbGxlcigpO1xyXG4gICAgaWYgKGRlbHRhWSA+IDApIHtcclxuICAgICAgc2Nyb2xsZXIubmV4dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChkZWx0YVkgPCAwKSB7XHJcbiAgICAgIHNjcm9sbGVyLnByZXYoKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJCh3aW5kb3cpLm9uKFwia2V5ZG93blwiLCAoZSkgPT4ge1xyXG4gICAgY29uc3QgdGFnTmFtZSA9IGUudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcclxuICAgIGNvbnN0IHVzZXJUeXBpbmdJbklucHV0cyA9IHRhZ05hbWUgPT0gXCJpbnB1dFwiIHx8IHRhZ05hbWUgPT0gXCJ0ZXh0YXJlYVwiO1xyXG4gICAgY29uc3Qgc2Nyb2xsZXIgPSB2aWV3cG9ydFNjcm9sbGVyKCk7XHJcblxyXG4gICAgaWYgKHVzZXJUeXBpbmdJbklucHV0cykgcmV0dXJuO1xyXG5cclxuICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7XHJcbiAgICAgIGNhc2UgNDA6IC8vcHJldlxyXG4gICAgICAgIHNjcm9sbGVyLm5leHQoKTtcclxuICAgICAgICBicmVhaztcclxuXHJcbiAgICAgIGNhc2UgMzg6IC8vbmV4dFxyXG4gICAgICAgIHNjcm9sbGVyLnByZXYoKTtcclxuICAgICAgICBicmVhaztcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgJChcIi53cmFwcGVyXCIpLm9uKFwidG91Y2htb3ZlXCIsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcblxyXG4gICQoXCJbZGF0YS1zY3JvbGwtdG9dXCIpLmNsaWNrKChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICBjb25zdCB0YXJnZXQgPSAkdGhpcy5hdHRyKFwiZGF0YS1zY3JvbGwtdG9cIik7XHJcbiAgICBjb25zdCByZXFTZWN0aW9uID0gJChgW2RhdGEtc2VjdGlvbi1pZCA9ICR7dGFyZ2V0fV1gKTtcclxuXHJcbiAgICBwZXJmb3JtVHJhbnNpdGlvbihyZXFTZWN0aW9uLmluZGV4KCkpO1xyXG4gIH0pO1xyXG5cclxuICAvKiBpZiAoaXNNb2JpbGUpIHtcclxuICAgICQoXCJib2R5XCIpLnN3aXBlKCB7XHJcbiAgICAgIC8vR2VuZXJpYyBzd2lwZSBoYW5kbGVyIGZvciBhbGwgZGlyZWN0aW9uc1xyXG4gICAgICBzd2lwZTpmdW5jdGlvbihldmVudCxkaXJlY3Rpb24pIHtcclxuICAgICAgICBcclxuICAgICAgIGNvbnN0IHNjcm9sbGVyID0gdmlld3BvcnRTY3JvbGxlcigpOyBcclxuICAgICAgIGxldCBzY3JvbGxEaXJlY3Rpb24gPSBcIlwiO1xyXG4gICAgICAgXHJcbiAgICBcclxuICAgICAgIGlmIChkaXJlY3Rpb24gPT0gXCJ1cFwiKSBzY3JvbGxEaXJlY3Rpb24gPSBcIm5leHRcIjtcclxuICAgICAgIGlmIChkaXJlY3Rpb24gPT0gXCJkb3duXCIpIHNjcm9sbERpcmVjdGlvbiA9IFwicHJldlwiO1xyXG4gICAgXHJcbiAgICAgICBzY3JvbGxlcltzY3JvbGxEaXJlY3Rpb25dKCk7XHJcbiAgICB9XHJcbiAgICB9KVxyXG4gIFxyXG4gIH1cclxuICAgKi9cclxuICBpZiAoaXNNb2JpbGUpIHtcclxuICAgICQoXCJib2R5XCIpLnN3aXBlKHtcclxuICAgICAgc3dpcGU6IGZ1bmN0aW9uIChldmVudCwgZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgY29uc3Qgc2Nyb2xsZXIgPSB2aWV3cG9ydFNjcm9sbGVyKCk7XHJcbiAgICAgICAgbGV0IHNjcm9sbERpcmVjdGlvbiA9IFwiXCI7XHJcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSBcInVwXCIpIHtcclxuICAgICAgICAgIHNjcm9sbERpcmVjdGlvbiA9IFwibmV4dFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSBcImRvd25cIikge1xyXG4gICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uID0gXCJwcmV2XCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzY3JvbGxlcltzY3JvbGxEaXJlY3Rpb25dKCk7XHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICB9XHJcbn0pKCk7XHJcbiIsIjsoZnVuY3Rpb24oKSB7XHJcbi8v0L7QsdGK0Y/QstC70Y/QtdC8INC/0LXRgNC10LzQtdC90L3Ri9C1OlxyXG5cclxuLy/Qv9C10YDQtdC80LXQvdC90LDRjyDRgSDQutGA0YPQs9C70YvQvNC4INCw0LLQsNGC0LDRgNC60LDQvNC4XHJcblxyXG5cclxuY29uc3QgYXZhdGFycyA9ICQoJy5pbnRlcmFjdGl2ZS1hdmF0YXInKTtcclxuXHJcbmNvbnN0IGRpc3BsYXlJbm5lciA9ICQoJy5yZXdpZXZzX19kaXNwbGF5LWlubmVyJyk7XHJcblxyXG5cclxuLyogY29uc3QgYXZhdGFycyA9ICQoJ1tkYXRhLWZyb21dJyk7XHJcblxyXG5jb25zdCBkaXNwbGF5SW5uZXIgPSAkKCdbZGF0YS10b10nKTtcclxuXHJcblxyXG5cclxuYXZhdGFycy5vbignY2xpY2snLCBlID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0ICR0aGlzID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG5cclxuICAgIGNvbnN0IGRpc3BsYXlJbm5lckRhdGEgPSBkaXNwbGF5SW5uZXJcclxuXHJcbiAgICBhdmF0YXJzLnJlbW92ZUNsYXNzKCdpbnRlcmFjdGl2ZS1hdmF0YXJfYWN0aXZlJyk7XHJcblxyXG5cclxuICAgIGlmICgkdGhpcy5oYXNDbGFzcygnaW50ZXJhY3RpdmUtYXZhdGFyJykpIHtcclxuICAgICAgICAkdGhpcy5hZGRDbGFzcygnaW50ZXJhY3RpdmUtYXZhdGFyX2FjdGl2ZScpXHJcbiAgICB9XHJcblxyXG5cclxuXHJcbn0pICAqL1xyXG5cclxuXHJcblxyXG5cclxuXHJcbi8v0L7QsdGK0Y/QstC70Y/QtdC8INGG0LjQutC7INC60L7RgtC+0YDRi9C5INC/0LXRgNC10LHQuNGA0LDQtdGCINCy0YHQtSDQutGA0YPQs9C70YvQtSDQsNCy0LDRgtCw0YDQutC4XHJcbmZvciAobGV0IGkgPSAwOyBpIDwgYXZhdGFycy5sZW5ndGg7IGkrKykge1xyXG4gICAgLy/Qv9GA0LjRgdCy0LDQuNCy0LDQtdC8INGN0LvQtdC80LXQvdGC0YMg0YbQuNC60LvQsCjQutC+0L3QutGA0LXRgtC90L7QuSDQsNCy0LDRgtGA0LrQtSkg0L/QtdGA0LXQvNC10L3QvdGD0Y4g0Y3Qu9C10LzQtdC90YJcclxuICAgIGxldCBlbGVtZW50ID0gYXZhdGFyc1tpXTtcclxuXHJcbiAgICAvL9GB0L7Qt9C00LDQtdC8INGB0L7QsdGL0YLQuNC1INC60LvQuNC60LAg0L3QsCDQsNCy0LDRgtCw0YDQutGDINC4INGE0YPQvdC60YbQuNGOINC60L7RgtC+0YDQsNGPINCy0YvQv9C+0LvQvdGP0LXRgtGB0Y8g0L/RgNC4INC60LvQuNC60LVcclxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcblxyXG4gICAgICAgIC8v0JLQvdGC0YPRgNC4INGE0YPQvdC60YbQuNC4OlxyXG5cclxuICAgICAgICAvL9C+0YLQvNC10L3Rj9C10Lwg0YHRgtCw0L3QtNCw0YDRgtC90L7QtSDQtNC10LnRgdGC0LLQuNC1INCx0YDQsNGD0LfQtdGA0LAg0L/RgNC4INC60LvQuNC60LUg0L3QsCDRjdC70LXQvNC10L3RgijRgdGB0YvQu9C60LApXHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcblxyXG4gICAgICAgIC8v0YHQvdC+0LLQsCDQvtCx0YrRj9Cy0LvRj9C10Lwg0YbQuNC60Lsg0LrQvtGC0L7RgNGL0Lkg0L/QtdGA0LXQsdC40YDQsNC10YIg0LLRgdC1INC60YDRg9Cz0LvRi9C1INCw0LLQsNGC0LDRgNC60LhcclxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYXZhdGFycy5sZW5ndGg7IGluZGV4KyspIHtcclxuXHJcbiAgICAgICAgICAgIC8v0YPQsdC40YDQsNC10Lwg0LDQutGC0LjQstC90YvQuSDQutC70LDRgdGBINCy0YHQtdC8INCw0LLQsNGC0LDRgNC60LDQvCDQv9GA0Lgg0LrQu9C40LrQtSwg0L3QsCDRgtC10YUg0L3QsCDQutC+0YLQvtGA0YvRhSDQvtC9INC10YHRgtGMXHJcbiAgICAgICAgICAgIGF2YXRhcnNbaW5kZXhdLmNsYXNzTGlzdC5yZW1vdmUoJ2ludGVyYWN0aXZlLWF2YXRhcl9hY3RpdmUnKVxyXG4gICAgICAgICAgICAvL9GD0LHQuNGA0LDQtdC8INCw0LrRgtC40LLQvdGL0Lkg0LrQu9Cw0YHRgSDQtNC40YHQv9C70LXRjiDQv9GA0Lgg0LrQu9C40LrQtSwg0L3QsCDRgtC10YUg0L3QsCDQutC+0YLQvtGA0YvRhSDQvtC9INC10YHRgtGMXHJcbiAgICAgICAgICAgIGRpc3BsYXlJbm5lcltpbmRleF0uY2xhc3NMaXN0LnJlbW92ZSgncmV3aWV2c19fZGlzcGxheS1pbm5lcl9hY3RpdmUnKVxyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgLy/Qv9GA0LjRgdCy0LDQuNCy0LDQtdC8INCw0LrRgtC40LLQvdGL0Lkg0LrQu9Cw0YHRgSDQsNCy0LDRgtCw0YDQutC1LCDQvdCwINC60L7RgtC+0YDRg9GA0YPRjiDQv9GA0L7QuNC30LLQtdC70Lgg0LrQu9C40LpcclxuICAgICAgICBkaXNwbGF5SW5uZXJbaV0uY2xhc3NMaXN0LmFkZCgncmV3aWV2c19fZGlzcGxheS1pbm5lcl9hY3RpdmUnKTtcclxuICAgICAgICAvL9C/0YDQuNGB0LLQsNC40LLQsNC10Lwg0LDQutGC0LjQstC90YvQuSDQutC70LDRgdGBINC00LjRgdC/0LvQtdGOXHJcbiAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2ludGVyYWN0aXZlLWF2YXRhcl9hY3RpdmUnKTtcclxuICAgIH0pXHJcbn1cclxuXHJcblxyXG5cclxuXHJcbi8qIGZ1bmN0aW9uIGNoYW5nZSh0YXJnZXQsIFxyXG4gICAgICAgICAgICAgICAgaSwgXHJcbiAgICAgICAgICAgICAgICBhdmF0YXJzLFxyXG4gICAgICAgICAgICAgICAgZGlzcGxheUlubmVyLCBcclxuICAgICAgICAgICAgICAgIGF2YXRhcnNBY3RpdmUsIFxyXG4gICAgICAgICAgICAgICAgZGlzcGxheUlubmVyQWN0aXZlLCBcclxuICAgICAgICAgICAgICAgIGUpIHtcclxuXHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBcclxuICAgICAgICAgaW5kZXggPCBhdmF0YXJzLmxlbmd0aDsgXHJcbiAgICAgICAgIGluZGV4KyspIHtcclxuXHJcbiAgICAgICAgYXZhdGFyc1tpbmRleF0uY2xhc3NMaXN0LnJlbW92ZShhdmF0YXJzQWN0aXZlKVxyXG4gICAgICAgIGRpc3BsYXlJbm5lcltpbmRleF0uY2xhc3NMaXN0LnJlbW92ZShkaXNwbGF5SW5uZXJBY3RpdmUpXHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGxheUlubmVyW2ldLmNsYXNzTGlzdC5hZGQoZGlzcGxheUlubmVyQWN0aXZlKTtcclxuICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKGF2YXRhcnNBY3RpdmUpO1xyXG59O1xyXG5cclxuXHJcblxyXG5mb3IgKGxldCBpID0gMDsgXHJcbiAgICAgaSA8IGF2YXRhcnMubGVuZ3RoOyBcclxuICAgICBpKyspIHtcclxuXHJcbiAgICBsZXQgZWxlbWVudCA9IGF2YXRhcnNbaV07XHJcblxyXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBcclxuICAgIGNoYW5nZSggZS5jdXJyZW50VGFyZ2V0LCBcclxuICAgICAgICAgICAgaSwgXHJcbiAgICAgICAgICAgIGF2YXRhcnMsIFxyXG4gICAgICAgICAgICBkaXNwbGF5SW5uZXIsIFxyXG4gICAgICAgICAgICAnaW50ZXJhY3RpdmUtYXZhdGFyX2FjdGl2ZScsIFxyXG4gICAgICAgICAgICAncmV3aWV2c19fZGlzcGxheS1pbm5lcl9hY3RpdmUnLFxyXG4gICAgICAgICAgICBlKVxyXG4gICAgfSlcclxufSAqL1xyXG59KSgpXHJcblxyXG4iLCI7KGZ1bmN0aW9uKCkge1xyXG5jb25zdCBvcGVuSXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgY29uc3QgY29udGFpbmVyID0gaXRlbS5jbG9zZXN0KFwiLnRlYW1tYXRlLWl0ZW1cIik7XHJcbiAgY29uc3QgY29udGVudEJsb2NrID0gY29udGFpbmVyLmZpbmQoXCIucG9zaXRpb24td3JhcHBlclwiKTtcclxuICBjb25zdCB0ZXh0QkxvY2sgPSBjb250ZW50QmxvY2suZmluZChcIi5wb3NpdGlvblwiKTtcclxuICBjb25zdCByZXFIZWlnaHQgPSB0ZXh0QkxvY2suaGVpZ2h0KCk7XHJcbiAgY29uc3QgYXJyb3cgPSBjb250YWluZXIuZmluZChcIi50ZWFtX19kZXNjLWFycm93LWltZ1wiKTtcclxuXHJcbiAgY29udGFpbmVyLmFkZENsYXNzKFwidGVhbW1hdGUtaXRlbV9hY3RpdmVcIik7XHJcbiAgYXJyb3cuYWRkQ2xhc3MoXCJ0ZWFtX19kZXNjLWFycm93LWltZ19hY3RpdmVcIik7XHJcblxyXG4gIGNvbnRlbnRCbG9jay5oZWlnaHQocmVxSGVpZ2h0KTtcclxufTtcclxuXHJcblxyXG5cclxuXHJcbmNvbnN0IGNsb3NlRXZlcnlJdGVtID0gZnVuY3Rpb24gKGNvbnRhaW5lcikge1xyXG4gIGNvbnN0IGl0ZW1zID0gY29udGFpbmVyLmZpbmQoXCIucG9zaXRpb24td3JhcHBlclwiKTtcclxuICBjb25zdCBpdGVtQ29udGFpbmVyID0gY29udGFpbmVyLmZpbmQoXCIudGVhbW1hdGUtaXRlbVwiKTtcclxuICBjb25zdCBpdGVtQXJyb3cgPSBjb250YWluZXIuZmluZChcIi50ZWFtX19kZXNjLWFycm93LWltZ1wiKTtcclxuICBpdGVtcy5oZWlnaHQoMCk7XHJcblxyXG4gIGl0ZW1BcnJvdy5yZW1vdmVDbGFzcyhcInRlYW1fX2Rlc2MtYXJyb3ctaW1nX2FjdGl2ZVwiKTtcclxuICBpdGVtQ29udGFpbmVyLnJlbW92ZUNsYXNzKFwidGVhbW1hdGUtaXRlbV9hY3RpdmVcIik7XHJcbn07XHJcblxyXG5cclxuXHJcblxyXG4kKFwiLnRlYW1tYXRlLW5hbWUtd3JhcHBlclwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgY29uc3QgY29udGFpbmVyID0gJHRoaXMuY2xvc2VzdChcIi50ZWFtXCIpO1xyXG4gIGNvbnN0IGVsZW1Db250YWluZXIgPSAkdGhpcy5jbG9zZXN0KFwiLnRlYW1tYXRlLWl0ZW1cIik7XHJcblxyXG4gIGlmIChlbGVtQ29udGFpbmVyLmhhc0NsYXNzKFwidGVhbW1hdGUtaXRlbV9hY3RpdmVcIikpIHtcclxuICAgIGNsb3NlRXZlcnlJdGVtKGNvbnRhaW5lcik7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNsb3NlRXZlcnlJdGVtKGNvbnRhaW5lcik7XHJcbiAgICBvcGVuSXRlbSgkdGhpcyk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8qIGNvbnN0IGl0ZW1zID0gJCgnLnRlYW1tYXRlLW5hbWUtd3JhcHBlcicpO1xyXG5jb25zdCBwb3NpdGlvbldyYXBwZXIgPSAkKCcucG9zaXRpb24td3JhcHBlcicpO1xyXG5jb25zdCBhcnJvdyA9ICQoJy50ZWFtX19kZXNjLWFycm93LWltZycpO1xyXG5cclxuaXRlbXMuZWFjaCgoaSxpdGVtKSA9PiB7XHJcblxyXG4kKGl0ZW0pLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcblxyXG4gIGl0ZW1zLmVhY2goKGosZWxlbSkgPT4gIHtcclxuXHJcbiAgICBpZiAoaiAhPSBpKSB7XHJcbiAgICAgICQocG9zaXRpb25XcmFwcGVyW2pdKS5yZW1vdmVDbGFzcygncG9zaXRpb24td3JhcHBlcl9hY3RpdmUnKTtcclxuICAgICAgJChhcnJvd1tqXSkucmVtb3ZlQ2xhc3MoJ3RlYW1fX2Rlc2MtYXJyb3ctaW1nX2FjdGl2ZScpO1xyXG4gICAgICAgfVxyXG5cclxuICB9KVxyXG4gIFxyXG4gICAgJChwb3NpdGlvbldyYXBwZXJbaV0pLnRvZ2dsZUNsYXNzKCdwb3NpdGlvbi13cmFwcGVyX2FjdGl2ZScpO1xyXG4gICAgJChhcnJvd1tpXSkudG9nZ2xlQ2xhc3MoJ3RlYW1fX2Rlc2MtYXJyb3ctaW1nX2FjdGl2ZScpO1xyXG4gICAgXHJcbiAgfSlcclxuXHJcbn0pICovXHJcblxyXG4vKiBjb25zdCBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50ZWFtbWF0ZS1uYW1lLXdyYXBwZXInKTtcclxuY29uc3QgcG9zaXRpb25XcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvc2l0aW9uLXdyYXBwZXInKTtcclxuY29uc3QgYXJyb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGVhbV9fZGVzYy1hcnJvdy1pbWcnKTtcclxuXHJcblxyXG5mb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gIGxldCBlbGVtZW50ID0gaXRlbXNbaV07XHJcblxyXG4gIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7IFxyXG5cclxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgaXRlbXMubGVuZ3RoOyBqKyspIHtcclxuXHJcblxyXG4gICAgaWYgKGogIT0gaSkge1xyXG4gICAgcG9zaXRpb25XcmFwcGVyW2pdLmNsYXNzTGlzdC5yZW1vdmUoJ3Bvc2l0aW9uLXdyYXBwZXJfYWN0aXZlJyk7XHJcbiAgICBhcnJvd1tqXS5jbGFzc0xpc3QucmVtb3ZlKCd0ZWFtX19kZXNjLWFycm93LWltZ19hY3RpdmUnKTtcclxuICAgICB9XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwb3NpdGlvbldyYXBwZXJbaV0uY2xhc3NMaXN0LnRvZ2dsZSgncG9zaXRpb24td3JhcHBlcl9hY3RpdmUnKTtcclxuICAgIGFycm93W2ldLmNsYXNzTGlzdC50b2dnbGUoJ3RlYW1fX2Rlc2MtYXJyb3ctaW1nX2FjdGl2ZScpO1xyXG4gICAgXHJcbiAgICBcclxuXHJcbiAgfSlcclxuXHJcbn0gKi9cclxuXHJcbn0pKClcclxuXHJcblxyXG4iLCIvKiBjb25zdCBvcGVuQWNjbyA9IChpdGVtKSA9PiB7XHJcblxyXG5pdGVtLmFkZENsYXNzKFwiYWNjby1pdGVtX2FjdGl2ZVwiKTtcclxuXHJcbn1cclxuXHJcblxyXG5cclxuY29uc3QgY2xvc2VBY2NvID0gKGxpc3QpID0+IHtcclxuXHJcbiAgY29uc3QgbGlzdEl0ZW0gPSBsaXN0LmZpbmQoXCIuYWNjby1pdGVtXCIpOyBcclxuICBsaXN0SXRlbS5yZW1vdmVDbGFzcyhcImFjY28taXRlbV9hY3RpdmVcIik7XHJcblxyXG4gIH1cclxuXHJcblxyXG4kKFwiLmFjY28tdGl0bGUtd3JhcHBlclwiKS5vbignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgJHRoaXMgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICBjb25zdCBpdGVtQ29udGFpbmVyID0gJHRoaXMuY2xvc2VzdChcIi5hY2NvLWl0ZW1cIik7XHJcbiAgICBjb25zdCBhY2NvTGlzdCA9IGl0ZW1Db250YWluZXIuY2xvc2VzdChcIi5hY2NvLWxpc3RcIik7XHJcbiAgICBcclxuaWYgKGl0ZW1Db250YWluZXIuaGFzQ2xhc3MoXCJhY2NvLWl0ZW1fYWN0aXZlXCIpKSB7XHJcbiAgICBjbG9zZUFjY28oYWNjb0xpc3QpO1xyXG5cclxuXHJcblxyXG59IGVsc2Uge1xyXG4gICAgY2xvc2VBY2NvKGFjY29MaXN0KTtcclxuICAgIG9wZW5BY2NvKGl0ZW1Db250YWluZXIpO1xyXG5cclxuICAgIH1cclxufSkgKi9cclxuXHJcblxyXG5cclxuXHJcblxyXG47KGZ1bmN0aW9uKCkge1xyXG5cclxuXHJcbiAgY29uc3QgbWF4V2lkdGggPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xyXG5cclxuICBcclxuICBjb25zdCBvcGVuQWNjbyA9IChpdGVtKSA9PiB7XHJcbiAgICBpdGVtLmFkZENsYXNzKFwiYWNjby1pdGVtX2FjdGl2ZVwiKTtcclxuICAgIFxyXG4gIH07XHJcbiAgXHJcbiAgY29uc3QgY2xvc2VBY2NvID0gKGxpc3QpID0+IHtcclxuICAgIGNvbnN0IGxpc3RJdGVtID0gbGlzdC5maW5kKFwiLmFjY28taXRlbVwiKTtcclxuICAgIGxpc3RJdGVtLnJlbW92ZUNsYXNzKFwiYWNjby1pdGVtX2FjdGl2ZVwiKTtcclxuICB9O1xyXG4gIFxyXG5cclxuICBsZXQgY3VycldpZHRoID0gZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aDtcclxuXHJcbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbihlKSB7XHJcbiAgICBjdXJyV2lkdGggPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xyXG4gIH0pXHJcbiAgXHJcbiAgXHJcbiAgXHJcbiAgJChcIi5hY2NvLWl0ZW1cIikub24oXCJjbGlja1wiLCAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgXHJcbiAgICBpZiAoY3VycldpZHRoID4gNDgwKSB7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoJChlLnRhcmdldCkuaGFzQ2xhc3MoXCJhY2NvLXRpdGxlLXdyYXBwZXJcIikgfHwgJChlLnRhcmdldCkuaGFzQ2xhc3MoXCJhY2NvLXRpdGxlXCIpKSB7XHJcbiAgICAgICAgY29uc3QgJHRoaXMgPSAkKGUudGFyZ2V0KTtcclxuICAgICAgICBjb25zdCBpdGVtQ29udGFpbmVyID0gJHRoaXMuY2xvc2VzdChcIi5hY2NvLWl0ZW1cIik7XHJcbiAgICAgICAgY29uc3QgYWNjb0xpc3QgPSBpdGVtQ29udGFpbmVyLmNsb3Nlc3QoXCIuYWNjby1saXN0XCIpO1xyXG4gICAgXHJcbiAgICBcclxuICAgICAgICBpZiAoaXRlbUNvbnRhaW5lci5oYXNDbGFzcyhcImFjY28taXRlbV9hY3RpdmVcIikpIHtcclxuICAgICAgICAgIGNsb3NlQWNjbyhhY2NvTGlzdCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNsb3NlQWNjbyhhY2NvTGlzdCk7XHJcbiAgICAgICAgICBvcGVuQWNjbyhpdGVtQ29udGFpbmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIFxyXG4gICAgICBpZiAoJChlLnRhcmdldCkuaGFzQ2xhc3MoXCJjbG9zZS14XCIpIHx8ICQoZS50YXJnZXQpLmhhc0NsYXNzKFwiY2xvc2UtdmVydC1tZW51XCIpKSB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gJChlLnRhcmdldCk7XHJcbiAgICAgICAgY29uc3QgSXRlbXMgPSB0YXJnZXQuY2xvc2VzdChcIi5hY2NvLWxpc3RcIik7XHJcbiAgICBcclxuICAgICAgICBjbG9zZUFjY28oSXRlbXMpXHJcbiAgICAgIH0gXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxldCBpdGVtVG9BZGQgPSAkKGA8ZGl2IGNsYXNzPVwiYWRkZWQtaXRlbVwiPjwvZGl2PmApO1xyXG4gICAgICAgIGl0ZW1Ub0FkZC5odG1sKCQoZS5jdXJyZW50VGFyZ2V0KS5odG1sKCkpO1xyXG5cclxuICAgICAgICBpZiAoISQoJy5hZGRlZC1pdGVtJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAkKCcudmVydGljYWwtbWVudV9fc2VjdGlvbicpLmFwcGVuZChpdGVtVG9BZGQpO1xyXG5cclxuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgaXRlbVRvQWRkLmFkZENsYXNzKFwiYWRkZWQtaXRlbV9hY3RpdmVcIilcclxuICAgICAgICAgIH0sIDEwMCk7XHJcblxyXG4gICAgICAgICAgLyogaXRlbVRvQWRkLmFkZENsYXNzKFwiYWRkZWQtaXRlbV9hY3RpdmVcIikgKi9cclxuICAgICAgICAgICQoJy5hZGRlZC1pdGVtJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgY29uc3QgJHRhcmdldCA9ICQoZS50YXJnZXQpXHJcbiAgICAgICAgICAgIGlmICgkdGFyZ2V0Lmhhc0NsYXNzKCdjbG9zZS14JykgfHwgJHRhcmdldC5oYXNDbGFzcygnYWNjby10aXRsZS13cmFwcGVyJykgfHwgJHRhcmdldC5oYXNDbGFzcygnYWNjby10aXRsZScpKSB7XHJcblxyXG4gICAgICAgICAgICAgIGl0ZW1Ub0FkZC5yZW1vdmVDbGFzcyhcImFkZGVkLWl0ZW1fYWN0aXZlXCIpXHJcbiAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtVG9BZGQucmVtb3ZlKClcclxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgXHJcbiAgfSk7XHJcbiAgXHJcbn0pKClcclxuXHJcbiIsIjsoZnVuY3Rpb24oKSB7XHJcbiAgY29uc3QgcGxheWVyID0gJChcIi5wbGF5ZXItZWxlbVwiKVswXTtcclxuICBjb25zdCBwbGF5ZXJDb250YWluZXIgPSAkKFwiLnBsYXllclwiKTtcclxuICBcclxuICAkKFwiLnBsYXktc3RvcFwiKS5jbGljaygoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIFxyXG4gICAgaWYgKHBsYXllckNvbnRhaW5lci5oYXNDbGFzcyhcInBsYXllcl9wYXVzZWRcIikpIHtcclxuICAgICAgcGxheWVyQ29udGFpbmVyLnJlbW92ZUNsYXNzKFwicGxheWVyX3BhdXNlZFwiKTtcclxuICAgICAgcGxheWVyQ29udGFpbmVyLnJlbW92ZUNsYXNzKFwicGxheWVyX2FjdGl2ZVwiKTtcclxuICAgICAgcGxheWVyLnBhdXNlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBwbGF5ZXJDb250YWluZXIuYWRkQ2xhc3MoXCJwbGF5ZXJfcGF1c2VkXCIpO1xyXG4gICAgICBwbGF5ZXIucGxheSgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIFxyXG4gICQoXCIucGxheWJhY2tfX3NsaWRlci1saW5lXCIpLmNsaWNrKChlKSA9PiB7XHJcbiAgICBjb25zdCBsaW5lID0gJChlLmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgY29uc3QgY2xpY2tlZFBvcyA9IGUub3JpZ2luYWxFdmVudC5sYXllclg7XHJcbiAgICBjb25zdCBuZXdCdG5Qb3NQcmVjZW50ID0gKGNsaWNrZWRQb3MgLyBsaW5lLndpZHRoKCkpICogMTAwO1xyXG4gIFxyXG4gICAgJChcIi5wbGF5YmFja19fYnRuXCIpLmNzcyh7XHJcbiAgICAgIGxlZnQ6IGAke25ld0J0blBvc1ByZWNlbnR9JWAsXHJcbiAgICB9KTtcclxuICBcclxuICAgIHBsYXllci5wYXVzZSgpO1xyXG4gICAgcGxheWVyLmN1cnJlbnRUaW1lID0gcGxheWVyLmR1cmF0aW9uICogKGNsaWNrZWRQb3MgLyBsaW5lLndpZHRoKCkpO1xyXG4gICAgcGxheWVyLnBsYXkoKTtcclxuICAgIHBsYXllckNvbnRhaW5lci5hZGRDbGFzcyhcInBsYXllcl9wYXVzZWRcIik7XHJcbiAgfSk7XHJcbiAgXHJcbiAgJChwbGF5ZXIpLm9uKFwidGltZXVwZGF0ZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgcGxheUJhY2tCdG4gPSAkKFwiLnBsYXliYWNrX19idG5cIik7XHJcbiAgICBsZXQgdGltZVByb2dyZXNzID0gKHBsYXllci5jdXJyZW50VGltZSAvIHBsYXllci5kdXJhdGlvbikgKiAxMDAgKyBcIiVcIjtcclxuICAgIHBsYXlCYWNrQnRuLmNzcyhcImxlZnRcIiwgdGltZVByb2dyZXNzKTtcclxuICB9KTtcclxuICBcclxuICAkKFwiLnZvbHVtZV9fc2xpZGVyLWxpbmVcIikuY2xpY2soKGUpID0+IHtcclxuICAgIGNvbnN0IHZvbHVtZUxpbmUgPSAkKGUuY3VycmVudFRhcmdldCk7XHJcbiAgICBjb25zdCB2b2x1bWVDbGlja2VkUG9zID0gZS5vcmlnaW5hbEV2ZW50LmxheWVyWDtcclxuICBcclxuICAgIGNvbnN0IHZvbEJ0blBvc1ByZWNlbnQgPSAodm9sdW1lQ2xpY2tlZFBvcyAvIHZvbHVtZUxpbmUud2lkdGgoKSkgKiAxMDA7XHJcbiAgXHJcbiAgICAkKFwiLnZvbHVtZV9fc2xpZGVyLWJ0blwiKS5jc3Moe1xyXG4gICAgICBsZWZ0OiBgJHt2b2xCdG5Qb3NQcmVjZW50fSVgLFxyXG4gICAgfSk7XHJcbiAgICBwbGF5ZXIudm9sdW1lID0gdm9sQnRuUG9zUHJlY2VudCAvIDEwMDtcclxuICBcclxuICAgIGlmIChwbGF5ZXJDb250YWluZXIuaGFzQ2xhc3MoXCJwbGF5ZXJfX3NvdW5kLW9mZlwiKSkge1xyXG4gICAgICBwbGF5ZXJDb250YWluZXIucmVtb3ZlQ2xhc3MoXCJwbGF5ZXJfX3NvdW5kLW9mZlwiKTtcclxuICAgICAgcGxheWVyLm11dGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgXHJcbiAgJChcIi5wbGF5ZXItZWxlbVwiKS5vbihcInBsYXlcIiwgKGUpID0+IHtcclxuICAgIHBsYXllckNvbnRhaW5lci5hZGRDbGFzcyhcInBsYXllcl9hY3RpdmUgXCIpO1xyXG4gIH0pO1xyXG4gIFxyXG4gICQoXCIucGxheWVyLXNwbGFzaFwiKS5vbihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICBwbGF5ZXJDb250YWluZXIuYWRkQ2xhc3MoXCJwbGF5ZXJfYWN0aXZlIHBsYXllcl9wYXVzZWRcIik7XHJcbiAgICBwbGF5ZXIucGxheSgpO1xyXG4gIH0pO1xyXG4gIFxyXG4gICQoXCIudm9sdW1lX19pY29ucy13cmFwcGVyXCIpLm9uKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgIGlmIChwbGF5ZXJDb250YWluZXIuaGFzQ2xhc3MoXCJwbGF5ZXJfX3NvdW5kLW9mZlwiKSkge1xyXG4gICAgICBwbGF5ZXJDb250YWluZXIucmVtb3ZlQ2xhc3MoXCJwbGF5ZXJfX3NvdW5kLW9mZlwiKTtcclxuICAgICAgcGxheWVyLm11dGVkID0gZmFsc2U7XHJcbiAgICB9IGVsc2UgaWYgKCQoZS50YXJnZXQpLmZpbHRlcihcImNsb3NlXCIpKSB7XHJcbiAgICAgIHBsYXllckNvbnRhaW5lci5hZGRDbGFzcyhcInBsYXllcl9fc291bmQtb2ZmXCIpO1xyXG4gICAgICBwbGF5ZXIubXV0ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIFxyXG4gIH0pO1xyXG4gIFxyXG59KSgpXHJcblxyXG5cclxuXHJcbiJdfQ==
